<link rel="import" href="../../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../../../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="service-account">
    <template>
        <iron-ajax auto
                   id="accountAjax"
                   handle-as="json"
                   content-type="application/json"
                   on-response="_onResponse"
                   on-error="_onError"
                   debounce-duration="300"></iron-ajax>
    </template>
    <script>
        class ServiceAccount extends Polymer.Element {
            static get is() { return "service-account" }
            static get properties() {
                return {

                    method: {
                        type: String
                    },

                    url: {
                        type: String
                    }
                }
            }

            /**
             * Login service
             *
             * @param body
             */
            login(body) {
                this.$.accountAjax.method = "POST";
                this.$.accountAjax.url    = "http://localhost:80/api/login";
                this.$.accountAjax.body   = body;
            }

            /**
             * Resister service
             *
             * @param body
             */
            resister(body) {
                this.$.accountAjax.method = "POST";
                this.$.accountAjax.url    = "http://localhost:80/api/register";
                this.$.accountAjax.body   = body;
            }

            /**
             * Account status service
             *
             * @param params
             */
            status(params) {
                this.$.accountAjax.method = "GET";
                this.$.accountAjax.url    = "http://localhost:80/api/status";
                this.$.accountAjax.params = params;
            }

            /**
             * Logout service
             *
             * @param headers
             */
            logout(headers) {
                this.$.accountAjax.method  = "POST";
                this.$.accountAjax.url     = "http://localhost:80/api/logout";
                this.$.accountAjax.headers = headers;
            }

            _onResponse(e) {
                this.dispatchEvent(new CustomEvent('response', e));
            }

            _onError(e) {
                this.dispatchEvent(new CustomEvent('error', e));
            }
        }
        customElements.define(ServiceAccount.is, ServiceAccount);
    </script>
</dom-module>